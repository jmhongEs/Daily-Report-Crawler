<?php
// todo : view랑 데이터 던지는 코드 분리하기
// DB에서 데이터 받기

$kospi = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2652.64,
    "d20" => 8674.14
];

$kosdaq = [
    "now" => 908.98,
    "d1" => 1023.52,
    "d5" => 853.15,
    "d20" => 632.63
];

$dow = [
    "now" => 4356.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$nas = [
    "now" => 2356.64,
    "d1" => 2356.64,
    "d5" => 2356.64,
    "d20" => 2356.64
];

$shs = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$mes = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$es = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$hk = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$ust = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$gg = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$treasuryBond3 = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$treasuryBond10 = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$koreaCd91 = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$us2 = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$us10 = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$usdKrw = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$eurUsd = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$usdCny = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$jpyKrw = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$wti = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$gold = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$nickel = [
    "now" => 2652.64,
    "d1" => 2640.42,
    "d5" => 2546.53,
    "d20" => 2674.14
];

$kospiChangeD1 = 23.42;
$kospiChangeD5 = -2433.42;
$kospiChangeD20 = 23.42;

$kosdaqChangeD1 = 23.42;
$kosdaqChangeD5 = 23.42;
$kosdaqChangeD20 = 23.42;

$dowChangeD1 = 23.42;
$dowChangeD5 = -23.42;
$dowChangeD20 = 23.42;

$nasChangeD1 = 23.42;
$nasChangeD5 = -23.42;
$nasChangeD20 = 23.42;

$shsChangeD1 = 23.42;
$shsChangeD5 = 23.42;
$shsChangeD20 = -23.42;

$mesChangeD1 = 23.42;
$mesChangeD5 = 0;
$mesChangeD20 = 23.42;

$esChangeD1 = 23.42;
$esChangeD5 = 23.42;
$esChangeD20 = 23.42;

$hkChangeD1 = 23.42;
$hkChangeD5 = 23.42;
$hkChangeD20 = 23.42;

$ustChangeD1 = 23.42;
$ustChangeD5 = 23.42;
$ustChangeD20 = 23.42;

$ggChangeD1 = 23.42;
$ggChangeD5 = 23.42;
$ggChangeD20 = 23.42;

$treasuryBond3ChangeD1 = 23.42;
$treasuryBond3ChangeD5 = 23.42;
$treasuryBond3ChangeD20 = 23.42;

$treasuryBond10ChangeD1 = 23.42;
$treasuryBond10ChangeD5 = 23.42;
$treasuryBond10ChangeD20 = 23.42;

$koreaCd91ChangeD1 = 23.42;
$koreaCd91ChangeD5 = 23.42;
$koreaCd91ChangeD20 = 23.42;

$us2ChangeD1 = 23.42;
$us2ChangeD5 = 23.42;
$us2ChangeD20 = 23.42;

$us10ChangeD1 = 23.42;
$us10ChangeD5 = 23.42;
$us10ChangeD20 = 23.42;

$usdKrwChangeD1 = 23.42;
$usdKrwChangeD5 = 23.42;
$usdKrwChangeD20 = 23.42;

$eurUsdChangeD1 = 23.42;
$eurUsdChangeD5 = 23.42;
$eurUsdChangeD20 = 23.42;

$usdCnyChangeD1 = 23.42;
$usdCnyChangeD5 = 23.42;
$usdCnyChangeD20 = 23.42;

$jpyKrwChangeD1 = 23.42;
$jpyKrwChangeD5 = 23.42;
$jpyKrwChangeD20 = 23.42;

$wtiChangeD1 = 23.42;
$wtiChangeD5 = 23.42;
$wtiChangeD20 = 23.42;

$goldChangeD1 = 23.42;
$goldChangeD5 = 23.42;
$goldChangeD20 = 23.42;

$nickelChangeD1 = 23.42;
$nickelChangeD5 = 23.42;
$nickelChangeD20 = 23.42;


$todayFormat = Date('Y-m-d');
// 하루 전날
$today = new DateTime();
$yesterday = $today->modify('-1 day');

// style 변경 (글자 색)
function changeStyleByUpDown($diff) {
    if ($diff > 0) {
        return "color: #CC3300";
    } else if ($diff < 0) {
        return "color: #0000CC";
    } else {
        return "color: #333333";
    }
}

// 문자 변경
function changeSymbolByUpDown($diff) {
    if ($diff > 0) {
        return "▲";
    } else if ($diff < 0) {
        return "▼";
    } else {
        return "&nbsp-&nbsp";
    }
}

// 증감값에 절댓값 처리 + 포맷팅
function valueFormat($value) {
    return number_format(abs($value), 2);
}

// 인라인 스타일 코드 간소화
$table_td = "text-align: center; font-size: 14px; padding: 7px 0;";
$value_td = "font-size: 14px; padding: 7px 0 7px 12px;";
$fonts = "font-family: AppleSDGothic, malgun gothic, nanum gothic, Noto Sans KR, sans-serif;";


$mailHtml = "
<!DOCTYPE html>
<html lang=\"en\">

<head>
    <meta charset=\"UTF-8\">
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">
    <title>Daily Report</title>
</head>

<body style=\"width: 800px;  padding: 0 20px;\">

    <header style=\"display: flex; justify-content: space-between; align-items: flex-end; margin: 0 30px 0;\">
        <h5 style=\"{$fonts} margin-bottom: 9px;\">메쎄이상</h5>
        <h1 style=\"{$fonts} margin-bottom: 9px;\">Daily Report</h1>
        <h5 style=\"{$fonts} margin-bottom: 9px;\"> {$todayFormat}</h5>
    </header>
    <hr style=\"margin: 0 0 2px;\">
    <hr style=\"margin: 0;\">

    <div style=\"display: flex; justify-content: space-between;\">
        <h4 style=\"{$fonts} margin-bottom: 4px;\">[주요지수 변동현황]</h4>
        <h5 style=\"{$fonts} margin-bottom: 4px;\">
             {$yesterday->format('(m월 d일 종가 기준)')}
        </h5>
    </div>

    <table style=\"border-collapse: collapse; margin: 0 auto; width: 100%;\">
        <thead>
            <tr style=\"border-top: 2px solid #555; border-bottom: 1px solid #aaa; background-color: #eee;\">
                <th style=\"{$fonts} width: 15%; padding: 10px; font-size: 14px;\">구분</th>
                <th style=\"{$fonts} width: 20%; padding: 10px; border-right: 1px solid #aaa; font-size: 14px;\"></th>
                <th style=\"{$fonts} width: 12%; padding: 10px; border-right: 1px solid #aaa; font-size: 14px;\">종가</th>
                <th style=\"{$fonts} width: 12%; padding: 10px; border-right: 1px solid #aaa; font-size: 14px;\">D-1</th>
                <th style=\"{$fonts} width: 12%; padding: 10px; border-right: 1px solid #aaa; font-size: 14px;\">D-5</th>
                <th style=\"{$fonts} width: 12%; padding: 10px; border-right: 1px solid #aaa; font-size: 14px;\">D-20</th>
                <th style=\"{$fonts} width: 15%; padding: 10px; font-size: 14px;\">비고</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th rowspan=\"5\" style=\"{$fonts} font-size: 14px;\">주가지수</th>
                <td style=\"{$fonts} {$table_td}\">KOSPI</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($kospi['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kospiChangeD1) . "\"> " . changeSymbolByUpDown($kospiChangeD1) . "&nbsp" . valueFormat($kospiChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kospiChangeD5) . "\"> " . changeSymbolByUpDown($kospiChangeD5) . "&nbsp" . valueFormat($kospiChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kospiChangeD20) . "\"> " . changeSymbolByUpDown($kospiChangeD20) . "&nbsp" . valueFormat($kospiChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>


            <tr>
                <td style=\"{$fonts} {$table_td}\">KOSDAQ</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($kosdaq['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kosdaqChangeD1) . "\"> " . changeSymbolByUpDown($kosdaqChangeD1) . "&nbsp" . valueFormat($kosdaqChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kosdaqChangeD5) . "\"> " . changeSymbolByUpDown($kosdaqChangeD5) . "&nbsp" . valueFormat($kosdaqChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($kosdaqChangeD20) . "\"> " . changeSymbolByUpDown($kosdaqChangeD20) . "&nbsp" . valueFormat($kosdaqChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">DOW JONES</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($dow['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($dowChangeD1) . "\"> " . changeSymbolByUpDown($dowChangeD1) . "&nbsp" . valueFormat($dowChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($dowChangeD5) . "\"> " . changeSymbolByUpDown($dowChangeD5) . "&nbsp" . valueFormat($dowChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($dowChangeD20) . "\"> " . changeSymbolByUpDown($dowChangeD20) . "&nbsp" . valueFormat($dowChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">나스닥</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($nas['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nasChangeD1) . "\"> " . changeSymbolByUpDown($nasChangeD1) . "&nbsp" . valueFormat($nasChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nasChangeD5) . "\"> " . changeSymbolByUpDown($nasChangeD5) . "&nbsp" . valueFormat($nasChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nasChangeD20) . "\"> " . changeSymbolByUpDown($nasChangeD20) . "&nbsp" . valueFormat($nasChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr style=\"border-bottom: 1px solid #aaa;\">
                <td style=\"{$fonts} {$table_td}\">상해종합</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($shs['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($shsChangeD1) . "\"> " . changeSymbolByUpDown($shsChangeD1) . "&nbsp" . valueFormat($shsChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($shsChangeD5) . "\"> " . changeSymbolByUpDown($shsChangeD5) . "&nbsp" . valueFormat($shsChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($shsChangeD20) . "\"> " . changeSymbolByUpDown($shsChangeD20) . "&nbsp" . valueFormat($shsChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>

            <tr>
                <th rowspan=\"5\" style=\"{$fonts} font-size: 14px;\">주요주가</th>
                <td style=\"{$fonts} {$table_td}\">메쎄이상</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($mes['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($mesChangeD1) . "\"> " . changeSymbolByUpDown($mesChangeD1) . "&nbsp" . valueFormat($mesChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($mesChangeD5) . "\"> " . changeSymbolByUpDown($mesChangeD5) . "&nbsp" . valueFormat($mesChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($mesChangeD20) . "\"> " . changeSymbolByUpDown($mesChangeD20) . "&nbsp" . valueFormat($mesChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">KOSDAQ</td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">이상네트웍스</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($es['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($esChangeD1) . "\"> " . changeSymbolByUpDown($esChangeD1) . "&nbsp" . valueFormat($esChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($esChangeD5) . "\"> " . changeSymbolByUpDown($esChangeD5) . "&nbsp" . valueFormat($esChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($esChangeD20) . "\"> " . changeSymbolByUpDown($esChangeD20) . "&nbsp" . valueFormat($esChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">KOSDAQ</td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">황금에스티</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($hk['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($hkChangeD1) . "\"> " . changeSymbolByUpDown($hkChangeD1) . "&nbsp" . valueFormat($hkChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($hkChangeD5) . "\"> " . changeSymbolByUpDown($hkChangeD5) . "&nbsp" . valueFormat($hkChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($hkChangeD20) . "\"> " . changeSymbolByUpDown($hkChangeD20) . "&nbsp" . valueFormat($hkChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">KOSPI</td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">유에스티</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($ust['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ustChangeD1) . "\"> " . changeSymbolByUpDown($ustChangeD1) . "&nbsp" . valueFormat($ustChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ustChangeD5) . "\"> " . changeSymbolByUpDown($ustChangeD5) . "&nbsp" . valueFormat($ustChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ustChangeD20) . "\"> " . changeSymbolByUpDown($ustChangeD20) . "&nbsp" . valueFormat($ustChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">KOSDAQ</td>
            </tr>
            <tr style=\"border-bottom: 1px solid #aaa;\">
                <td style=\"{$fonts} {$table_td}\">길교이앤씨</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($gg['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ggChangeD1) . "\"> " . changeSymbolByUpDown($ggChangeD1) . "&nbsp" . valueFormat($ggChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ggChangeD5) . "\"> " . changeSymbolByUpDown($ggChangeD5) . "&nbsp" . valueFormat($ggChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($ggChangeD20) . "\"> " . changeSymbolByUpDown($ggChangeD20) . "&nbsp" . valueFormat($ggChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">KONEX</td>
            </tr>

            <tr>
                <th rowspan=\"5\" style=\"{$fonts} font-size: 14px;\">주요금리</th>
                <td style=\"{$fonts} {$table_td}\">국고채 3년</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($treasuryBond3['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond3ChangeD1) . "\"> " . changeSymbolByUpDown($treasuryBond3ChangeD1) . "&nbsp" . valueFormat($treasuryBond3ChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond3ChangeD5) . "\"> " . changeSymbolByUpDown($treasuryBond3ChangeD5) . "&nbsp" . valueFormat($treasuryBond3ChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond3ChangeD20) . "\"> " . changeSymbolByUpDown($treasuryBond3ChangeD20) . "&nbsp" . valueFormat($treasuryBond3ChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">국고채 10년</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($treasuryBond10['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond10ChangeD1) . "\"> " . changeSymbolByUpDown($treasuryBond10ChangeD1) . "&nbsp" . valueFormat($treasuryBond10ChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond10ChangeD5) . "\"> " . changeSymbolByUpDown($treasuryBond10ChangeD5) . "&nbsp" . valueFormat($treasuryBond10ChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($treasuryBond10ChangeD20) . "\"> " . changeSymbolByUpDown($treasuryBond10ChangeD20) . "&nbsp" . valueFormat($treasuryBond10ChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">한국 CD 91일</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($koreaCd91['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($koreaCd91ChangeD1) . "\"> " . changeSymbolByUpDown($koreaCd91ChangeD1) . "&nbsp" . valueFormat($koreaCd91ChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($koreaCd91ChangeD5) . "\"> " . changeSymbolByUpDown($koreaCd91ChangeD5) . "&nbsp" . valueFormat($koreaCd91ChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($koreaCd91ChangeD20) . "\"> " . changeSymbolByUpDown($koreaCd91ChangeD20) . "&nbsp" . valueFormat($koreaCd91ChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">미국채 2년</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($us2['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us2ChangeD1) . "\"> " . changeSymbolByUpDown($us2ChangeD1) . "&nbsp" . valueFormat($us2ChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us2ChangeD5) . "\"> " . changeSymbolByUpDown($us2ChangeD5) . "&nbsp" . valueFormat($us2ChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us2ChangeD20) . "\"> " . changeSymbolByUpDown($us2ChangeD20) . "&nbsp" . valueFormat($us2ChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr style=\"border-bottom: 1px solid #aaa;\">
                <td style=\"{$fonts} {$table_td}\">미국채 10년</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($us10['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us10ChangeD1) . "\"> " . changeSymbolByUpDown($us10ChangeD1) . "&nbsp" . valueFormat($us10ChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us10ChangeD5) . "\"> " . changeSymbolByUpDown($us10ChangeD5) . "&nbsp" . valueFormat($us10ChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($us10ChangeD20) . "\"> " . changeSymbolByUpDown($us10ChangeD20) . "&nbsp" . valueFormat($us10ChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <th rowspan=\"4\" style=\"{$fonts} font-size: 14px;\">환율</th>
                <td style=\"{$fonts} {$table_td}\">달러/원 USDKRW</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($usdKrw['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdKrwChangeD1) . "\"> " . changeSymbolByUpDown($usdKrwChangeD1) . "&nbsp" . valueFormat($usdKrwChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdKrwChangeD5) . "\"> " . changeSymbolByUpDown($usdKrwChangeD5) . "&nbsp" . valueFormat($usdKrwChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdKrwChangeD20) . "\"> " . changeSymbolByUpDown($usdKrwChangeD20) . "&nbsp" . valueFormat($usdKrwChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">고시환율</td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">유로/달러 EURUSD</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($eurUsd['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($eurUsdChangeD1) . "\"> " . changeSymbolByUpDown($eurUsdChangeD1) . "&nbsp" . valueFormat($eurUsdChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($eurUsdChangeD5) . "\"> " . changeSymbolByUpDown($eurUsdChangeD5) . "&nbsp" . valueFormat($eurUsdChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($eurUsdChangeD20) . "\"> " . changeSymbolByUpDown($eurUsdChangeD20) . "&nbsp" . valueFormat($eurUsdChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">달러/위안 USDCNY</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($usdCny['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdCnyChangeD1) . "\"> " . changeSymbolByUpDown($usdCnyChangeD1) . "&nbsp" . valueFormat($usdCnyChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdCnyChangeD5) . "\"> " . changeSymbolByUpDown($usdCnyChangeD5) . "&nbsp" . valueFormat($usdCnyChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($usdCnyChangeD20) . "\"> " . changeSymbolByUpDown($usdCnyChangeD20) . "&nbsp" . valueFormat($usdCnyChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\"></td>
            </tr>
            <tr style=\"border-bottom: 1px solid #aaa;\">
                <td style=\"{$fonts} {$table_td}\">100엔/원 JPYKRW</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($jpyKrw['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($jpyKrwChangeD1) . "\"> " . changeSymbolByUpDown($jpyKrwChangeD1) . "&nbsp" . valueFormat($jpyKrwChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($jpyKrwChangeD5) . "\"> " . changeSymbolByUpDown($jpyKrwChangeD5) . "&nbsp" . valueFormat($jpyKrwChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($jpyKrwChangeD20) . "\"> " . changeSymbolByUpDown($jpyKrwChangeD20) . "&nbsp" . valueFormat($jpyKrwChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">100¥ 기준</td>
            </tr>
            <tr>
                <th rowspan=\"3\" style=\"font-size: 14px;\">주요원자재</th>
                <td style=\"{$fonts} {$table_td}\">국제유가 (WTI)</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($wti['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($wtiChangeD1) . "\"> " . changeSymbolByUpDown($wtiChangeD1) . "&nbsp" . valueFormat($wtiChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($wtiChangeD5) . "\"> " . changeSymbolByUpDown($wtiChangeD5) . "&nbsp" . valueFormat($wtiChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($wtiChangeD20) . "\"> " . changeSymbolByUpDown($wtiChangeD20) . "&nbsp" . valueFormat($wtiChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">단위 : 배럴</td>
            </tr>
            <tr>
                <td style=\"{$fonts} {$table_td}\">금</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($gold['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($goldChangeD1) . "\"> " . changeSymbolByUpDown($goldChangeD1) . "&nbsp" . valueFormat($goldChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($goldChangeD5) . "\"> " . changeSymbolByUpDown($goldChangeD5) . "&nbsp" . valueFormat($goldChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($goldChangeD20) . "\"> " . changeSymbolByUpDown($goldChangeD20) . "&nbsp" . valueFormat($goldChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">단위 : 트로이온스</td>
            </tr>
            <tr style=\"{$fonts} border-bottom: 2px solid #555;\">
                <td style=\"{$fonts} {$table_td}\">니켈</td>
                <td style=\"{$fonts} {$table_td}\"> " . valueFormat($nickel['now']) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nickelChangeD1) . "\"> " . changeSymbolByUpDown($nickelChangeD1) . "&nbsp" . valueFormat($nickelChangeD1) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nickelChangeD5) . "\"> " . changeSymbolByUpDown($nickelChangeD5) . "&nbsp" . valueFormat($nickelChangeD5) . "</td>
                <td style=\"{$fonts} {$value_td} " . changeStyleByUpDown($nickelChangeD20) . "\"> " . changeSymbolByUpDown($nickelChangeD20) . "&nbsp" . valueFormat($nickelChangeD20) . "</td>
                <td style=\"{$fonts} {$table_td}\">단위 : TON</td>
            </tr>
        </tbody>
    </table>
</body>

</html>";

echo $mailHtml;

$file = __DIR__ . "report.html";
file_put_contents($file, $mailHtml);
